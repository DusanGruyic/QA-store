import{u as p,W as f,b as o,k as e,Y as g,n,m as j,o as w}from"./productsRTK-a63fa0hW.js";import{G as b}from"./GuestLayout-GHvEa_5n.js";import{I as l}from"./InputError-D5Ibqstj.js";import{I as d}from"./inputtext.esm-_Cm40c9v.js";import{B as v}from"./button.esm-CyuHKLYo.js";import{F as y}from"./FormLayout-DAI_VKr7.js";import"./Footer-D9FBcr4T.js";import"./Dropdown-DftF5NWu.js";import"./transition-GLrNVLI4.js";const N="api/v1/auth/login";function G({status:m}){const c=p(),{data:r,setData:i,reset:x}=f({email:"",password:""});let[t,u]=o.useState(!1);o.useEffect(()=>()=>{x("password")},[]),o.useEffect(()=>{},[t]);const h=async a=>{a.preventDefault();try{await j.post(N,JSON.stringify(r),{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},withCredentials:!0}).then(async s=>{c(w(s.data)),localStorage.setItem("token",s.data.auth.token),localStorage.setItem("userId",s.data.user.id),localStorage.setItem("cartId",s.data.user.id),window.location.replace("/dashboard")})}catch(s){u(s.response.data.errors||{unauthorized:s.response.data.error}),console.error(s)}};return e.jsxs(b,{children:[e.jsx(g,{title:"Log in"}),e.jsxs(y,{status:m,children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsxs("h1",{className:"flex flex-column text-primary",children:["Welcome Back!"," ",e.jsx("span",{className:"animate-waving-hand",children:"👋🏻"})]}),e.jsx("span",{className:"text-600 text-l text-gray-600 line-height-3",children:"Don't have an account?"}),e.jsx(n,{href:route("register"),className:"font-medium no-underline ml-2 text-primary font:semibold hover:text-gray-600 cursor-pointer",children:"Create today!"})]}),e.jsx("form",{onSubmit:h,children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"block text-900 font-medium mb-2",children:"Email"}),e.jsx(d,{id:"email",type:"text",placeholder:"Email address",className:"w-full rounded",value:r.email,onChange:a=>i("email",a.target.value)}),e.jsx("div",{className:"text-center",children:e.jsx(l,{message:t==null?void 0:t.email})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"block text-900 font-medium mb-2",children:"Password"}),e.jsx(d,{id:"password",type:"password",placeholder:"Password",className:"w-full rounded",value:r.password,onChange:a=>i("password",a.target.value)}),e.jsx("div",{className:"text-center",children:e.jsx(l,{message:t==null?void 0:t.password})})]}),e.jsx("div",{className:"flex align-items-center justify-content-between mb-3",children:e.jsx(n,{href:route("password.request"),className:"font-medium no-underline text-primary text-right cursor-pointer",children:"Forgot your password?"})}),e.jsxs("div",{className:"flex flex-column text-center",children:[e.jsx(l,{message:t!=null&&t.unauthorized?"The email address or password you entered is invalid":null}),e.jsx(v,{label:"Sign In",className:"w-full bg-gray-200 text-primary hover:bg-indigo-300 hover:text-white text-xl mr-2 text-semibold py-2 px-4 border border-indigo-700 rounded"})]})]})})]})]})}export{G as default};
