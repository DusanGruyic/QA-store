import{b as o,W as g,k as s,Y as b,m as v}from"./productsRTK-a63fa0hW.js";import{I as i}from"./inputtext.esm-_Cm40c9v.js";import{B as N}from"./button.esm-CyuHKLYo.js";import{G as y}from"./GuestLayout-GHvEa_5n.js";import{I as r}from"./InputError-D5Ibqstj.js";import{F as P}from"./FormLayout-DAI_VKr7.js";import"./Footer-D9FBcr4T.js";import"./Dropdown-DftF5NWu.js";import"./transition-GLrNVLI4.js";const R="reset-password";function L({token:m,email:c}){let[e,n]=o.useState(!1);const[p,x]=o.useState(null),[u,w]=o.useState(!1),{data:t,setData:l,reset:f}=g({token:m,email:c,password:"",password_confirmation:""});o.useEffect(()=>()=>{f("password","password_confirmation")},[]);const h=()=>{w("Redirecting to Login page..."),setTimeout(()=>{window.location.replace("/login")},3e3)},j=async a=>{a.preventDefault();try{await v.post(R,JSON.stringify(t),{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(()=>{n(!1),x("New password successfully set!"),h()})}catch(d){console.error(d),n(d.response.data.errors)}};return s.jsxs(y,{children:[s.jsx(b,{title:"Reset Password"}),s.jsxs(P,{status:p,redirectMessage:u,children:[s.jsxs("div",{className:"text-center mb-5",children:[s.jsxs("h1",{className:"flex flex-column text-primary",children:["Password Reset"," "]}),s.jsx("span",{className:"text-600 text-l text-gray-600 line-height-3",children:"Set your new password"})]}),s.jsx("form",{onSubmit:j,children:s.jsxs("div",{children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"email",className:"block text-900 font-medium mb-2",children:"Email"}),s.jsx(i,{id:"email",type:"text",placeholder:"Email address",className:"w-full rounded",value:t.email,onChange:a=>l("email",a.target.value)}),s.jsx(r,{message:e==null?void 0:e.email})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password",className:"block text-900 font-medium mb-2",children:"Password"}),s.jsx(i,{id:"password",type:"password",placeholder:"Password",className:"w-full rounded",value:t.password,onChange:a=>l("password",a.target.value)}),s.jsx(r,{message:e==null?void 0:e.password})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password_confirmation",value:"Confirm Password",className:"block text-900 font-medium mb-2",children:"Confirm Password"}),s.jsx(i,{id:"password_confirmation",type:"password",name:"password_confirmation",placeholder:"Confirm Password",className:"w-full rounded",value:t.password_confirmation,autoComplete:"new-password",onChange:a=>l("password_confirmation",a.target.value)}),s.jsx("div",{className:"text-center",children:s.jsx(r,{message:e==null?void 0:e.password_confirmation})})]}),s.jsxs("div",{className:"flex flex-column text-center",children:[s.jsx(r,{message:e!=null&&e.unauthorized?"The email address or password you entered is invalid":null}),s.jsx(N,{label:"Reset Password",className:"w-full bg-gray-200 text-primary hover:bg-indigo-300 hover:text-white text-xl mr-2 text-semibold py-2 px-4 border border-indigo-700 rounded mt-5"})]})]})})]})]})}export{L as default};
